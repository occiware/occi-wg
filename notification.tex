\documentclass[10pt,a4paper]{article}
\usepackage[utf8]{inputenc}
\usepackage{fullpage}
\usepackage{graphicx}
\usepackage{fancyhdr}
\usepackage{occi}
\setlength{\headheight}{13pt}
\pagestyle{fancy}

\newcommand{\doccode}{XXXXX}

% default sans-serif
\renewcommand{\familydefault}{\sfdefault}

% no lines for headers and footers
\renewcommand{\headrulewidth}{0pt}
\renewcommand{\footrulewidth}{0pt}

% header
\fancyhf{}
\lhead{\doccode}
\rhead{\today}

% footer
\lfoot{occi-wg@ogf.org}
\rfoot{\thepage}

% paragraphs need some space...
\setlength{\parindent}{0pt}
\setlength{\parskip}{1ex plus 0.5ex minus 0.2ex}

% some space between header and text...
\headsep 13pt

\setcounter{secnumdepth}{4}

\begin{document}

% header on first page is different
\thispagestyle{empty}

\doccode \hfill Augusto Ciuffoletti, Univ. of Pisa\\ 
OCCI-WG \hfill Thijs Metsch, Intel Corp.\\
\rightline {Andy Edmonds, Zurich University of Applied Sciences}\\
\rightline {September 22, 2014}\\
\rightline {Updated: \today}

\vspace*{0.5in}

\begin{Large}
\textbf{Open Cloud Computing Interface - Notification Extension}
\end{Large}

\vspace*{0.5in}

\underline{Status of this Document}

This document provides information to the community regarding the
specification of the Open Cloud Computing Interface. Distribution is
unlimited.

\underline{Copyright Notice}

Copyright \copyright ~Open Grid Forum (2009-2011). All Rights Reserved.

\underline{Trademarks}

OCCI is a trademark of the Open Grid Forum.

\underline{Abstract}

This document, part of a document series, produced by the OCCI working
group within the Open Grid Forum (OGF), provides a high-level
definition of a Protocol and API. The document is based upon
previously gathered requirements and focuses on the scope of important
capabilities required to support modern service offerings.


\newpage
\tableofcontents
\newpage

\section{Introduction}
\input{include/introduction}

\section{Notational conventions}
\input{include/notational}

\newcommand{\smx}{{\em notifier}}
\newcommand{\ntfl}{{\em notification}}

\section{Motivations}

It is often the case that an entity changes during its lifetime: for instance a {\em Compute} resource experiences a transient at the beginning of its lifetime during bootup \cite{occi:infrastructure}.

We want to give the provider the tools to allow the user to define entities such that their changes are observable.

We introduce an OCCI Extension that allows the user

\begin{itemize} 
\item to differentiate an OCCI resource that produces notifications, and 
\item to describe how such notifications are visible to other OCCI Resources.
\end{itemize}

\section{OCCI notification}

The way to define a property of an OCCI entity is to associate a mixin to it. So the straightforward way to assert that an entity is one whose changes are observable is by associating a mixin that is related with this property. We call this mixin \smx.

To define where a notification is directed the user instantiates a \ntfl\ link.

%\begin{figure}[!h]
%	{\centering \resizebox*{0.9\columnwidth}{!}{\rotatebox{270}
%	    {\includegraphics{figs/infrastructure_model.pdf}}} \par}
%	\caption{Overview Diagram of OCCI Infrastructure Types.}
%	\label{fig:infra_uml}
%\end{figure}


\subsection{The \smx\ mixin}

\mytablefloat{
	\label{tbl:smx}The immutable model attributes of the \smx\ mixin.
	The base URL {\bf http://schemas.ogf.org/occi} has been replaced with
	{\bf $<$schema$>$} in this table for a better reading experience. 
	} {
	\begin{tabular}{lllllll}
	\toprule
	Term & Scheme & Title & Attributes & Actions & Depends & Applies \\
	\colrule
	\smx &  $<$schema$>$/notification\# & \smx\ Mixin 
	& \{\} & \{\} & \{\} & $<$schema$>$/core\#Resource \\
	\botrule
	\end{tabular}
}

The {\em mixin} instance assigned to the \smx\ type is {\tt http://schemas.ogf.org/occi/notification\#notifier}, as in table \ref{tbl:smx}. The provider that supports the OCCI Notification extension MUST implement the \smx\ mixin for each provided entity kind.

There is no capability associated with the \smx\ mixin: it is a {\em tag}.

\subsection{The \ntfl\ link} 

\mytablefloat{
	\label{tbl:ntfl}The immutable model attributes of the \ntfl\ kind.
	The base URL {\bf http://schemas.ogf.org/occi} has been replaced with
	{\bf $<$schema$>$} in this table for a better readability experience. 
	} {
	\begin{tabular}{llllll}
	\toprule
	Term & Scheme & Title & Attributes & Actions & Parent \\
	\colrule
	\ntfl &  $<$schema$>$/notification\# & \ntfl\ Link
	& \{\} & \{\} & $<$schema$>$/core\#Link\\
	\botrule
	\end{tabular}
}

The {\em kind} instance assigned to the \ntfl\ type is {\tt http://schemas.ogf.org/occi/notification\#notification}, as in table \ref{tbl:ntfl}. The target of a \ntfl\ is a generic {\em Resource}, while the source MUST be associated with the \smx\ mixin. 

If the user requests the creation of a \ntfl\ whose source is not associated with a \smx\ mixin, the request MUST fail with an error.

If the user removes the \ntfl\ mixin associated with a {\em Resource}, all outgoing \ntfl\ links MUST be silently removed.

There is no capability associated with the \ntfl.

According with the core model \cite{occi:core}, the user is able to discover all \ntfl\ links that have their source in a given {\em Resource}.

According with the core model \cite{occi:core}, the removal of the source of an \ntfl\ link determines the removal of the link itself.

\section{Application notes and an example}

From the user perspective, the application of the \smx\ to a {\em Resource} corresponds to enabling the access to its state. This is significant mainly for {\em Resources} whose state changes in time.

The \smx\ mixin alone does not specify which changing aspect is in fact notified, and how: notably, not necessarily the attribute with {\sc state} id, if one exists. When needed, additional mixins are used to address specific events.

From the provider perspective the association of a \smx\ mixin is reflected in the implementation of the functionalities needed to observe and render the change. How this is implemented depends on the {\em Resources} that are targets of the \ntfl.

The way in which notifications are used falls ouside the scope of this document: as a general rule, they are for management purposes. Such aspects can be defined by the user with mixins associated with the \ntfl\ link, or in the {\em Resource} targeted by the \ntfl.

The notification extension is inappropriate to describe the planned and periodic measurement of operational parameters of a resource for monitoring purposes: the monitoring extension \cite{occi:monitoring} specifically addresses such aspects, and may be coordinated with notification.

The following example (see figure \ref{fig:example}) illustrates a use case where the capabilities of the involved entities are implicit in the {\em Kind} of the target resource.

\begin{figure}
\centering
\includegraphics[width=0.4\textwidth]{figs/notificationExample.pdf}
\caption{Compute resources that notify their state to a control resource \label{fig:example}}
\end{figure}

\begin{quote}
A provider offers a Management Resource of {\em Kind} {\em 3-out-of-k}, that keeps in the {\em active} state three of the Compute resources from which it receives notifications.

The user that wants to take advantage of this service instantes a {\em 3-out-of-k} Resource $3ook$, and associates a \smx\ to each of the $k$ Compute resources $C_{1..k}$. For each of them a \ntfl\ link $N_i$ is instantiated that originates from $C_i$ and targets $3ook$.
\end{quote}

The schema is portable across any platform that offers the OCCI-infrastructure and OCCI-notification, and that provides a  {\em 3-out-of-k} {\em Kind}.

From the point of view of cloud management, the existence of a \smx\ entails the activation of a process that is able to detect and notify the occurrence of relevant events. The existence of a \ntfl\ corresponds to a kind of {\em subscribe} request: the occurrence of relevant events is notified to the target resource. 

The cloud management, knowing the type of resource that is the target of the notification, is able to optimize and configure the production of events and the notification protocol. However, such details are kept deliberatly hidden to the user, that has limited capabilities to configure the notifications service, bound to the existence of specialized mixins.

The API is therefore mostly opaque to the user: this is a feature of the notification service that is introduced to improve its useability, performance and robustness. Whenever the user needs better control on the monitoring process, for instance to perform custom management activities, the monitoring extension is preferable.

In figure \ref{fig:deploy} we give an idea of a possible deployment of a {\em 3ook} resource. The definition of the service attached to the resource is not relevant: all we need to know is that it controls resources based on notifications from the resources themselves, in a closed control loop. On the left side we see the virtual resources: the {\em 3-out-of-k} resource receives notifications in the form of {\sc xmpp} messages from the {\em notify processes} running on the Virtual Machine. The creation of this infrastructure is governed by the presence of \smx\ mixins and \ntfl. On the right there is the Cloud management architecture, that has control over the resources, in particular to process the input messages of the {\em 3ook} implementation (inside the container labelled {\em User Management}) and to control the state of the virtual machines (inside the container labelled {\em Resource Management}).

\begin{figure}
\centering
\includegraphics[width=0.6\textwidth]{figs/notificationDeploy.pdf}
\caption{Deploying a {\em 3ook} resource \label{fig:deploy}}
\end{figure}


Distinct providers may interoperate, if an agreement exists that allows cross-provider information transfer: for instance, one provides the  {\em 3-out-of-k} Resource and another the Compute resources.

\section{Security issues}
The OCCI Notification specification is an extension to the OCCI Core
and Model specification \cite{occi:core}; thus the same security
considerations as for the OCCI Core and Model specification apply
here.

\section{Glossary}
\label{sec:glossary}
\input{include/glossary}
 
%\section{Contributors}
%\input{include/contributors}

\section{Intellectual Property Statement}
\input{include/ip}

\section{Disclaimer}
\input{include/disclaimer}

\section{Full Copyright Notice}
\input{include/copyright}

\bibliographystyle{IEEEtran}
\bibliography{references}

\end{document}
